{"version":3,"file":"react-use-wizard.esm.js","sources":["../src/logger.ts","../src/wizardContext.ts","../src/wizard.tsx","../src/useWizard.ts"],"sourcesContent":["import { LogLevel } from './types';\n/**\n * Log messages in the console with a corresponding urgency\n *\n * @param level The urgency of the message\n * @param message The message to log in the console\n */\nexport const log = (level: LogLevel, message: string) => {\n  if (__DEV__) {\n    const packageName = '[react-use-wizard]';\n\n    switch (level) {\n      case 'warn':\n        console.warn(`${packageName} ${message}`);\n        break;\n      case 'error':\n        console.error(`${packageName} ${message}`);\n        break;\n      default:\n        console.log(`${packageName} ${message}`);\n    }\n  }\n};\n","import * as React from 'react';\n\nimport { WizardValues } from './types';\n\nconst WizardContext = React.createContext<WizardValues | null>(null);\n\nif (__DEV__) {\n  WizardContext.displayName = 'WizardContext';\n}\n\nexport default WizardContext;\n","import * as React from 'react';\n\nimport * as logger from './logger';\nimport { Handler, WizardProps } from './types';\nimport WizardContext from './wizardContext';\n\nconst Wizard: React.FC<WizardProps> = React.memo(\n  ({ header, footer, children, startIndex = 0 }) => {\n    const [activeStep, setActiveStep] = React.useState(startIndex);\n    const [isLoading, setIsLoading] = React.useState(false);\n    const hasNextStep = React.useRef(true);\n    const hasPreviousStep = React.useRef(false);\n    const nextStepHandler = React.useRef<Handler>(() => {});\n    const stepCount = React.Children.toArray(children).length;\n\n    hasNextStep.current = activeStep < stepCount - 1;\n    hasPreviousStep.current = activeStep > 0;\n\n    const goToNextStep = React.useRef(() => {\n      if (hasNextStep.current) {\n        setActiveStep((activeStep) => activeStep + 1);\n      }\n    });\n\n    const goToPreviousStep = React.useRef(() => {\n      if (hasPreviousStep.current) {\n        nextStepHandler.current = null;\n        setActiveStep((activeStep) => activeStep - 1);\n      }\n    });\n\n    const goToStep = React.useRef((stepIndex: number) => {\n      if (stepIndex >= 0 && stepIndex < stepCount) {\n        nextStepHandler.current = null;\n        setActiveStep(stepIndex);\n      } else {\n        if (__DEV__) {\n          logger.log(\n            'warn',\n            [\n              `Invalid step index [${stepIndex}] passed to 'goToStep'. `,\n              `Ensure the given stepIndex is not out of boundaries.`,\n            ].join(''),\n          );\n        }\n      }\n    });\n\n    // Callback to attach the step handler\n    const handleStep = React.useRef((handler: Handler) => {\n      nextStepHandler.current = handler;\n    });\n\n    const doNextStep = React.useRef(async () => {\n      if (hasNextStep.current && nextStepHandler.current) {\n        try {\n          setIsLoading(true);\n          await nextStepHandler.current();\n          setIsLoading(false);\n          nextStepHandler.current = null;\n          goToNextStep.current();\n        } catch (error) {\n          setIsLoading(false);\n          throw error;\n        }\n      } else {\n        goToNextStep.current();\n      }\n    });\n\n    const wizardValue = React.useMemo(\n      () => ({\n        nextStep: doNextStep.current,\n        previousStep: goToPreviousStep.current,\n        handleStep: handleStep.current,\n        isLoading,\n        activeStep,\n        stepCount,\n        isFirstStep: !hasPreviousStep.current,\n        isLastStep: !hasNextStep.current,\n        goToStep: goToStep.current,\n      }),\n      [activeStep, stepCount, isLoading],\n    );\n\n    const activeStepContent = React.useMemo(() => {\n      const reactChildren = React.Children.toArray(children);\n\n      if (__DEV__) {\n        // No steps passed\n        if (reactChildren.length === 0) {\n          logger.log(\n            'warn',\n            'Make sure to pass your steps as children in your <Wizard>',\n          );\n        }\n        // The passed start index is invalid\n        if (activeStep > reactChildren.length) {\n          logger.log('warn', 'An invalid startIndex is passed to <Wizard>');\n        }\n        // Invalid header element\n        if (header && !React.isValidElement(header)) {\n          logger.log('error', 'Invalid header passed to <Wizard>');\n        }\n        // Invalid footer element\n        if (footer && !React.isValidElement(footer)) {\n          logger.log('error', 'Invalid footer passed to <Wizard>');\n        }\n      }\n\n      return reactChildren[activeStep];\n    }, [activeStep, children, header, footer]);\n\n    return (\n      <WizardContext.Provider value={wizardValue}>\n        {header}\n        {activeStepContent}\n        {footer}\n      </WizardContext.Provider>\n    );\n  },\n);\n\nexport default Wizard;\n","import * as React from 'react';\n\nimport { WizardValues } from './types';\nimport WizardContext from './wizardContext';\n\nconst useWizard = () => {\n  const context = React.useContext(WizardContext);\n\n  if (!context && __DEV__) {\n    throw Error('Wrap your step with `Wizard`');\n  } else {\n    return context as WizardValues;\n  }\n};\n\nexport default useWizard;\n"],"names":["log","level","message","packageName","console","warn","error","WizardContext","React","displayName","Wizard","header","footer","children","startIndex","activeStep","setActiveStep","isLoading","setIsLoading","hasNextStep","hasPreviousStep","nextStepHandler","stepCount","toArray","length","current","goToNextStep","goToPreviousStep","goToStep","stepIndex","logger","join","handleStep","handler","doNextStep","wizardValue","nextStep","previousStep","isFirstStep","isLastStep","activeStepContent","reactChildren","Provider","value","useWizard","context","Error"],"mappings":"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"}